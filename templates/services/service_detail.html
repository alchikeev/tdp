{% extends "base.html" %}
{% load static %}
{% block after_header %}<div class="header-spacer" aria-hidden="true"></div>{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'styles/slide.css' %}">
  <link rel="stylesheet" href="{% static 'styles/tours.css' %}">
{% endblock %}
{% block body_class %}has-inner-hero{% endblock %}

{% block title %}{{ service.meta_title|default:service.title }}{% endblock %}

{% block content %}
{# ===== SLIDE-HERO (inline) ===== #}
<section class="home slide slide--inner">
  <div class="home_slider_container">
    <div class="background_image" style="background-image: url('{% if service.cover %}{{ service.cover.url }}{% else %}{% static "images/home_slider.jpg" %}{% endif %}');"></div>
    <div class="home_slider_content_container">
      <div class="hero hero--inner">
        <div class="container hero__grid">
          <div class="hero-left">
            <h1 class="hero-title">{{ service.title }}</h1>
            {% if service.location %}<p class="hero-sub">{{ service.location }}</p>{% endif %}
          </div>

          <div class="hero-right">
            <button class="btn-hero open-lead-modal"
                    data-cta="Inner Hero — Service Detail"
                    data-related_type="service"
                    data-related_id="{{ service.id }}"
                    type="button">Оставить заявку</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="container my-4">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/">Главная</a></li>
      <li class="breadcrumb-item"><a href="{% url 'services:list' %}">Услуги</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ service.title }}</li>
    </ol>
  </nav>

  <div class="row">
    <div class="col-lg-7">
      {% if service.cover %}
        <img src="{{ service.cover.url }}" class="img-fluid rounded mb-3" alt="{{ service.title }}">
      {% endif %}
      {% if service.images.all %}
        <div class="row">
          {% for img in service.images.all %}
            <div class="col-4 mb-3">
              <img src="{{ img.image.url }}" class="img-fluid rounded" alt="{{ img.caption }}">
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
    <div class="col-lg-5">
      <h1 class="h3">{{ service.title }}</h1>
      {% if service.location %}<div class="text-muted mb-2">Локация: {{ service.location }}</div>{% endif %}

      <div class="my-3">
  <strong>Стоимость:</strong><br>
  Цена: {{ service.price_adult|floatformat:0 }} сом
  {% if service.price_child %}<br>Дополнительные услуги: {{ service.price_child|floatformat:0 }} сом{% elif service.price_extra %}<br>Дополнительные услуги: {{ service.price_extra|floatformat:0 }} сом{% endif %}
      </div>

      <div class="mb-3">
        {{ service.description|linebreaks }}
      </div>

      {% if service.youtube_url %}
        <div class="ratio ratio-16x9 mb-3">
          <iframe src="{{ service.youtube_url|cut:'watch?v='|add:'embed/' }}" title="YouTube video" allowfullscreen></iframe>
        </div>
      {% endif %}

      <button class="order_btn open-lead-modal"
              data-cta="Service — {{ service.title }}"
              data-related_type="service"
              data-related_id="{{ service.id }}">
        Оставить заявку
      </button>

      {% if related %}
        <hr>
        <h5>Похожие услуги</h5>
        <ul class="small">
          {% for r in related %}
            <li><a href="{{ r.get_absolute_url }}">{{ r.title }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
